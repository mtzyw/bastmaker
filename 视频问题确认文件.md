# 视频功能对接问题

## 通用
1. 目前文字转视频与图转视频的“创建”按钮仅做禁用状态控制，尚未绑定任何提交流程或调用后端（见 `components/ai/TextToVideoLeftPanel.tsx:211`、`components/ai/ImageToVideoLeftPanel.tsx:438`）。是否需要我现在接入 Freepik API 并串联扣点/任务记录，还是后端流程还没准备好？
后端还没开始做 

2. Freepik 视频接口要求参考图是公网 URL 或 base64 字符串（例如 `freepik官方视频请求接口.md:2170-2178`、`1488-1536`），而前端目前只拿到 `File` 对象。计划是先上传到 Supabase/R2 再回填 URL，还是直接在前端转 base64 发给后端？
我希望我自己的业务的前端 拿到图片以后就上传r2 然后把r2传给后端 后端再去请求freepik

3. 文档里 Minimax、Seedance、Wan 等模型按照分辨率拆成不同 endpoint（如 `freepik官方视频请求接口.md:341-5032`），但前端只保留了一个模型加分辨率下拉（`components/ai/video-models.ts:53-61`）。最终是要在前端按“模型+分辨率”映射到具体 `apiValue`，还是由后端根据参数去路由？
这个后端实现



4. Supabase 已建好 `ai_models / ai_model_versions / ai_jobs` 等表（`supabase/migrations/20250913160000_ai_schema.sql`），但视频模型仍是硬编码在前端（`components/ai/video-models.ts:34-168`）。后续是否需要把 Freepik 模型元数据写入这些表，并通过 `ai_jobs`（或新增 `video_jobs`）记录任务？
你觉得有必要吗？

## 参数与类型映射
1. 文档里的 `aspect_ratio` 枚举为 `widescreen_16_9 / social_story_9_16 / ...`（如 `freepik官方视频请求接口.md:2759-2776`、`4682-4689`），而前端暴露的是 `16:9 / 9:16 / ...`（`components/ai/video-models.ts:34-41`）。是否需要我们在前端做一次枚举映射？如果某些模型需要 `auto`（Wan 默认值），产品是否留一个选项？
你觉得需要吗？


2. `VideoLengthValue` 目前统一是字符串字面量（`components/ai/video-models.ts:1`），但 Minimax 与 PixVerse 的接口要求整数型时长（如 `freepik官方视频请求接口.md:119-127`、`1520-1527`），Kling/Seedance/Wan 又要求字符串。是否需要在提交流程里按模型转换类型？
是的需要转化


3. 面板里有“翻译提示词”开关（`components/ai/TextToVideoLeftPanel.tsx:24`、`ImageToVideoLeftPanel.tsx:21`），而 Minimax 文档提供的是 `prompt_optimizer` 字段（`freepik官方视频请求接口.md:59-112`）。两个要合并成同一个参数吗，还是翻译只是前端行为，后端另行设置 `prompt_optimizer`？
打开的话prompt_optimizer就是ture

## Kling 2.1
1. `Kling Std v2.1` 在前端限定为 5/8 秒（`components/ai/video-models.ts:45-51`），但文档写的是 5/10 秒（`freepik官方视频请求接口.md:2192-2198`）。是否需要调整为 5/10？
好的改一下

2. Kling 的接口还支持 `cfg_scale`、`static_mask`、`dynamic_masks`、`image_tail` 等参数（同上文档 2199-2230、1108-1140）。这些高级参数后续是否要在 UI 暴露，还是由后端固定默认值？
这个后端固定默认就红了

## PixVerse V5
1. 文档限制 1080p 只能生成 5 秒视频（`freepik官方视频请求接口.md:1520-1527`），但前端在 1080p 时仍可选择 8 秒（`components/ai/video-models.ts:45-60`）。是否需要在 UI 或提交阶段做校验？
那这个前端就把8秒选项删除一下


2. Freepik 要求传 `style` 枚举（`freepik官方视频请求接口.md:1533-1535`），我们目前没有样式选项。是否设一个默认值（例如 anime）即可，还是要给用户选择？
不需要

## Minimax Hailuo 2.0
1. 1080p/768p 拆成不同 endpoint，且 1080p 只能做 6 秒（`freepik官方视频请求接口.md:341-438`）。前端虽然在 `getAllowedVideoLengths` 里做了 6s 限制（`components/ai/video-models.ts:64-80`），但提交时仍需把分辨率映射到正确的 endpoint。这个映射由前端负责还是放到后端？
前端吧

2. 文档里的 `prompt_optimizer` 默认为 `true`（`freepik官方视频请求接口.md:59-112`）。我们是否需要在请求里显式传递，或者与“翻译提示词”联动？
是的 开启翻译这个就是ture

## Seedance 1.0（Pro / Lite）
1. Seedance 也按照 1080p / 720p / 480p 拆分 endpoint，并支持更多比例如 `film_horizontal_21_9`、`film_vertical_9_21`（`freepik官方视频请求接口.md:2496-3201`、`2762-2776`）。若这些比例暂不开放，是否直接固定发 `widescreen_16_9 / social_story_9_16 / square_1_1`，还是需要补充更多选项？
现在的尺寸就够了

## Wan 2.2 Plus
1. Wan 的 `aspect_ratio` 默认值是 `auto` 且枚举是 `widescreen_16_9 / social_story_9_16 / square_1_1 / classic_4_3`（`freepik官方视频请求接口.md:4498-4700`），与前端暴露的 `16:9 / 9:16 / 1:1 / 4:3` 不完全一致。是否要新增 `auto` 选项并在提交时映射？
是的

请逐条确认或补充，方便我们后续统筹前后端对接。
